<section class="workspace-stack">
  <app-config-section title="Pasarela de Pagos" maxWidthClass="w-full">
    @if (loading()) {
      <p class="workspace-subheading">Cargando configuraci√≥n...</p>
    }

    <form [formGroup]="form" (ngSubmit)="save()" class="workspace-form">
      <div class="workspace-fieldset">
        <label class="workspace-field">
          <span class="workspace-label">Tipo</span>
          <select
            formControlName="tipo"
            class="workspace-input workspace-input--compact"
            [ngClass]="{ 'workspace-input-error': form.controls.tipo.invalid && form.controls.tipo.touched }"
          >
            <option [ngValue]="null">Seleccione...</option>
            @for (t of tipos; track t) {
              <option [ngValue]="t">{{ t }}</option>
            }
          </select>
          @if(form.controls.tipo.invalid && form.controls.tipo.touched){
            <p class="workspace-error">Requerido.</p>
          }
        </label>

        <label class="workspace-field">
          <span class="workspace-label">API Public Key</span>
          <input
            formControlName="apiPublicKey"
            type="text"
            class="workspace-input workspace-input--compact"
            [ngClass]="{
              'workspace-input-error': form.controls.apiPublicKey.invalid && form.controls.apiPublicKey.touched
            }"
          />
          @if(form.controls.apiPublicKey.invalid && form.controls.apiPublicKey.touched){
            <p class="workspace-error">Requerido.</p>
          }
        </label>

        <label class="workspace-field">
          <span class="workspace-label">API Secret</span>
          <input
            formControlName="apiSecret"
            type="password"
            class="workspace-input workspace-input--compact"
            [ngClass]="{
              'workspace-input-error': form.controls.apiSecret.invalid && form.controls.apiSecret.touched
            }"
          />
          @if(form.controls.apiSecret.invalid && form.controls.apiSecret.touched){
            <p class="workspace-error">Requerido.</p>
          }
        </label>

        <label class="workspace-field">
          <span class="workspace-label">URL Base</span>
          <input
            formControlName="urlBase"
            type="text"
            class="workspace-input workspace-input--compact"
            [ngClass]="{
              'workspace-input-error': form.controls.urlBase.invalid && form.controls.urlBase.touched
            }"
          />
          @if(form.controls.urlBase.invalid && form.controls.urlBase.touched){
            <p class="workspace-error">Requerido.</p>
          }
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Webhook URL</span>
          <input
            formControlName="urlWebhook"
            type="text"
            class="workspace-input workspace-input--compact"
            [ngClass]="{
              'workspace-input-error': form.controls.urlWebhook.invalid && form.controls.urlWebhook.touched
            }"
          />
          @if(form.controls.urlWebhook.invalid && form.controls.urlWebhook.touched){
            <p class="workspace-error">Requerido.</p>
          }
        </label>

        <div class="workspace-checkbox-row">
          <input id="activo" type="checkbox" formControlName="activo" />
          <label for="activo">Activo</label>
        </div>
      </div>

      <app-config-form-actions
        [editing]="editing()"
        [saving]="saving()"
        [disableSave]="form.invalid"
        (edit)="enableEdit()"
        (cancel)="cancel()"
      />
    </form>
  </app-config-section>
</section>
