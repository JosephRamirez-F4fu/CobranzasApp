<section class="mx-auto grid max-w-6xl gap-6">
  <header class="space-y-2">
    <p class="text-sm font-semibold uppercase tracking-wide text-indigo-500">Alumnos</p>
    <h1 class="text-3xl font-bold text-slate-900">Detalle de pagos</h1>
    <p class="text-sm text-slate-500">
      Consulta el detalle de los pagos realizados por matrícula. Accede desde el listado de alumnos para traer la información automáticamente.
    </p>
    <a
      routerLink="/institution/alumnos"
      class="inline-flex items-center gap-2 text-sm font-semibold text-indigo-600 transition hover:-translate-y-0.5 hover:text-indigo-500"
    >
      ← Volver al listado de alumnos
    </a>
  </header>

  <div *ngIf="error() as errorMessage" class="rounded-xl bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700 shadow-lg shadow-rose-300/30">
    {{ errorMessage }}
  </div>

  <div *ngIf="loading()" class="rounded-xl border border-dashed border-slate-200 bg-white px-4 py-6 text-center text-sm text-slate-500">
    Cargando pagos registrados…
  </div>

  <ng-container *ngIf="!loading()">
    <ng-container *ngIf="status() as account; else selectStudent">
      <section class="grid gap-4 rounded-2xl bg-white p-6 shadow-xl shadow-slate-900/10">
        <header class="flex flex-col gap-1">
          <h2 class="text-2xl font-semibold text-slate-900">{{ account.nombreCompleto }}</h2>
          <p class="text-sm text-slate-500">Identificador: {{ account.id }}</p>
        </header>

        <div *ngIf="payments.length; else noPayments" class="overflow-x-auto">
          <table class="min-w-full divide-y divide-slate-200 text-sm">
            <thead class="bg-slate-50">
              <tr>
                <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">Fecha</th>
                <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">Monto</th>
                <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">Método</th>
                <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">N° Operación</th>
                <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">Matrícula</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-200 bg-white text-slate-700">
              <tr *ngFor="let payment of payments" class="transition hover:bg-slate-50">
                <td class="px-4 py-3">{{ payment.fechaPago | date:'mediumDate' }}</td>
                <td class="px-4 py-3 font-semibold text-emerald-700">{{ payment.montoPagado | currency:'PEN':'symbol':'1.2-2' }}</td>
                <td class="px-4 py-3">{{ payment.metodoPago || 'Sin método' }}</td>
                <td class="px-4 py-3 text-xs text-slate-500">{{ payment.numeroOperacion || '—' }}</td>
                <td class="px-4 py-3 text-xs text-slate-500">{{ payment.periodoAcademico || 'Sin periodo' }} • #{{ payment.matriculaId }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <ng-template #noPayments>
          <p class="rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-500">
            No se registran pagos para el alumno seleccionado.
          </p>
        </ng-template>
      </section>
    </ng-container>
  </ng-container>

  <ng-template #selectStudent>
    <div class="rounded-2xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-500">
      Selecciona un alumno desde el módulo de alumnos para revisar sus pagos.
    </div>
  </ng-template>
</section>
