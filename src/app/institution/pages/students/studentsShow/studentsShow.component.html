<section class="mx-auto grid max-w-6xl gap-6">
  <app-institution-student-form
    [form]="form"
    [saving]="saving()"
    [editing]="editing()"
    (submitted)="onSubmit()"
    (canceled)="onCancelEdit()"
    (cleared)="onClearForm()"
  ></app-institution-student-form>

  <div *ngIf="feedback() as message" class="rounded-xl bg-emerald-50 px-4 py-3 text-sm font-semibold text-emerald-700 shadow-lg shadow-emerald-500/20">
    {{ message }}
  </div>

  <form
    [formGroup]="filtersForm"
    (ngSubmit)="onApplyFilters()"
    class="grid gap-4 rounded-2xl bg-white p-4 shadow-lg shadow-slate-900/5 sm:grid-cols-[repeat(auto-fit,minmax(220px,1fr))]"
  >
    <div class="flex flex-col gap-1">
      <label class="text-xs font-semibold uppercase tracking-wide text-slate-900" for="filter-name">
        Buscar por nombre
      </label>
      <input
        id="filter-name"
        type="text"
        formControlName="nombreCompleto"
        placeholder="Nombre o apellidos"
        class="rounded-xl border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-900 placeholder:text-slate-900 shadow-sm transition focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-200"
      />
    </div>
    <div class="flex flex-col gap-1">
      <label class="text-xs font-semibold uppercase tracking-wide text-slate-900" for="filter-dni">
        Documento
      </label>
      <input
        id="filter-dni"
        type="text"
        formControlName="dni"
        placeholder="DNI"
        class="rounded-xl border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-900 placeholder:text-slate-900 shadow-sm transition focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-200"
      />
    </div>
    <div class="flex items-end gap-3">
      <button
        type="submit"
        class="inline-flex items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/30 transition hover:-translate-y-0.5 hover:shadow-indigo-500/40"
      >
        Aplicar filtros
      </button>
      <button
        type="button"
        (click)="onResetFilters()"
        class="inline-flex items-center justify-center rounded-full bg-slate-200 px-5 py-2.5 text-sm font-semibold text-slate-700 shadow-sm transition hover:-translate-y-0.5 hover:bg-slate-300"
      >
        Limpiar filtros
      </button>
    </div>
  </form>

  <app-institution-student-table
    [students]="students()"
    [loading]="loading()"
    [page]="page()"
    [totalPages]="totalPages()"
    [totalItems]="totalItems()"
    (edit)="onEdit($event)"
    (remove)="onDelete($event)"
    (pageChange)="onPageChange($event)"
  ></app-institution-student-table>
</section>
