<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  class="workspace-form-card"
>
  <header class="workspace-form-header">
    <h2 class="workspace-form-title">
      {{ editing ? 'Actualizar alumno' : 'Registrar nuevo alumno' }}
    </h2>
    <p class="workspace-form-subtitle">
      Gestiona los datos generales y la informaci?n de contacto del tutor desde este formulario.
    </p>
  </header>

  <section class="grid gap-6 lg:grid-cols-2">
    <div class="space-y-4">
      <h3 class="workspace-section-title">Datos del alumno</h3>
      <div class="workspace-fieldset">
        <label class="workspace-field sm:col-span-2">
          <span class="workspace-label">Nombre completo</span>
          <input
            type="text"
            formControlName="nombreCompleto"
            placeholder="Ej. Mar?a L?pez"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['nombreCompleto'].invalid && form.controls['nombreCompleto'].touched }"
          />
          <small
            *ngIf="form.controls['nombreCompleto'].invalid && form.controls['nombreCompleto'].touched"
            class="workspace-error"
          >
            El nombre es obligatorio.
          </small>
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Documento de identidad</span>
          <input
            type="text"
            formControlName="dni"
            placeholder="DNI o documento equivalente"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['dni'].invalid && form.controls['dni'].touched }"
          />
          <small *ngIf="form.controls['dni'].invalid && form.controls['dni'].touched" class="workspace-error">
            Ingrese un documento v?lido (entre 8 y 12 caracteres).
          </small>
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Nivel</span>
          <input
            type="text"
            formControlName="nivel"
            placeholder="Ej. Secundaria"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['nivel'].invalid && form.controls['nivel'].touched }"
          />
          <small *ngIf="form.controls['nivel'].invalid && form.controls['nivel'].touched" class="workspace-error">
            El nivel es obligatorio.
          </small>
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Grado</span>
          <input
            type="text"
            formControlName="grado"
            placeholder="Ej. 3?"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['grado'].invalid && form.controls['grado'].touched }"
          />
          <small *ngIf="form.controls['grado'].invalid && form.controls['grado'].touched" class="workspace-error">
            El grado es obligatorio.
          </small>
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Secci?n</span>
          <input
            type="text"
            formControlName="seccion"
            placeholder="Ej. A"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['seccion'].invalid && form.controls['seccion'].touched }"
          />
          <small *ngIf="form.controls['seccion'].invalid && form.controls['seccion'].touched" class="workspace-error">
            La secci?n es obligatoria.
          </small>
        </label>

        <label class="workspace-field sm:col-span-2">
          <span class="workspace-label">Direcci?n</span>
          <textarea
            rows="3"
            formControlName="direccion"
            placeholder="Direcci?n completa de residencia"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['direccion'].invalid && form.controls['direccion'].touched }"
          ></textarea>
          <small *ngIf="form.controls['direccion'].invalid && form.controls['direccion'].touched" class="workspace-error">
            La direcci?n es obligatoria.
          </small>
        </label>
      </div>
    </div>

    <div class="space-y-4">
      <h3 class="workspace-section-title">Responsable de pago</h3>
      <div class="workspace-fieldset">
        <label class="workspace-field">
          <span class="workspace-label">Nombre del responsable</span>
          <input
            type="text"
            formControlName="responsablePago"
            placeholder="Ej. Juan P?rez"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['responsablePago'].invalid && form.controls['responsablePago'].touched }"
          />
          <small
            *ngIf="form.controls['responsablePago'].invalid && form.controls['responsablePago'].touched"
            class="workspace-error"
          >
            El responsable es obligatorio.
          </small>
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Correo del responsable</span>
          <input
            type="email"
            formControlName="correoResponsable"
            placeholder="responsable@correo.com"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['correoResponsable'].invalid && form.controls['correoResponsable'].touched }"
          />
          <small
            *ngIf="form.controls['correoResponsable'].invalid && form.controls['correoResponsable'].touched"
            class="workspace-error"
          >
            Ingrese un correo valido.
          </small>
        </label>

        <label class="workspace-field">
          <span class="workspace-label">Tel?fono de contacto</span>
          <input
            type="tel"
            formControlName="telefonoResponsable"
            placeholder="Ej. +51 999 999 999"
            class="workspace-input"
            [ngClass]="{ 'workspace-input-error': form.controls['telefonoResponsable'].invalid && form.controls['telefonoResponsable'].touched }"
          />
          <small
            *ngIf="form.controls['telefonoResponsable'].invalid && form.controls['telefonoResponsable'].touched"
            class="workspace-error"
          >
            Ingrese un tel?fono valido.
          </small>
        </label>

        <label class="workspace-field sm:col-span-2">
          <span class="workspace-label">Observaciones</span>
          <textarea
            rows="3"
            formControlName="observaciones"
            placeholder="Notas adicionales sobre el alumno o el responsable"
            class="workspace-input"
          ></textarea>
        </label>
      </div>
    </div>
  </section>

  <footer class="flex flex-wrap items-center gap-3">
    <button type="submit" [disabled]="form.invalid || saving" class="workspace-primary-btn">
      {{ saving ? 'Guardando.' : (editing ? 'Actualizar alumno' : 'Registrar alumno') }}
    </button>
    <button
      type="button"
      *ngIf="editing"
      (click)="onCancel()"
      [disabled]="saving"
      class="workspace-danger-btn"
    >
      Cancelar
    </button>
    <button
      type="button"
      *ngIf="!editing"
      (click)="onClear()"
      [disabled]="saving"
      class="workspace-secondary-btn"
    >
      Limpiar
    </button>
  </footer>
</form>
