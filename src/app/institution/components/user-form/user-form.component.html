<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  class="grid gap-6 rounded-2xl bg-white p-6 shadow-xl shadow-slate-900/10"
>
  <header class="space-y-1">
    <h2 class="text-2xl font-semibold text-slate-900">
      {{ editing ? 'Actualizar usuario administrador' : 'Registrar nuevo usuario administrador' }}
    </h2>
    <p class="text-sm text-slate-500">
      Los usuarios creados desde este módulo siempre tendrán el rol <strong>ADMIN</strong> dentro de la institución.
    </p>
  </header>

  <div class="grid gap-4 sm:grid-cols-2">
    <label class="flex flex-col gap-1 font-semibold text-slate-800">
      <span class="text-sm">Nombre completo</span>
      <input
        type="text"
        formControlName="nombreCompleto"
        placeholder="Ej. Ana Torres"
        class="rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-medium text-slate-900 shadow-sm transition focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-200"
        [ngClass]="{
          'border-rose-400 focus:border-rose-500 focus:ring-rose-200':
            form.controls['nombreCompleto'].invalid && form.controls['nombreCompleto'].touched
        }"
      />
      <small
        *ngIf="form.controls['nombreCompleto'].invalid && form.controls['nombreCompleto'].touched"
        class="text-sm font-medium text-rose-500"
      >
        El nombre es obligatorio.
      </small>
    </label>

    <label class="flex flex-col gap-1 font-semibold text-slate-800">
      <span class="text-sm">Correo electrónico</span>
      <input
        type="email"
        formControlName="correo"
        placeholder="usuario@institucion.com"
        class="rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-medium text-slate-900 shadow-sm transition focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-200"
        [ngClass]="{
          'border-rose-400 focus:border-rose-500 focus:ring-rose-200':
            form.controls['correo'].invalid && form.controls['correo'].touched
        }"
      />
      <small
        *ngIf="form.controls['correo'].invalid && form.controls['correo'].touched"
        class="text-sm font-medium text-rose-500"
      >
        Ingrese un correo válido.
      </small>
    </label>

    <label class="flex flex-col gap-1 font-semibold text-slate-800">
      <span class="text-sm">Nombre de usuario</span>
      <input
        type="text"
        formControlName="nombreUsuario"
        placeholder="Ej. atorres"
        class="rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-medium text-slate-900 shadow-sm transition focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-200"
        [ngClass]="{
          'border-rose-400 focus:border-rose-500 focus:ring-rose-200':
            form.controls['nombreUsuario'].invalid && form.controls['nombreUsuario'].touched
        }"
      />
      <small
        *ngIf="form.controls['nombreUsuario'].invalid && form.controls['nombreUsuario'].touched"
        class="text-sm font-medium text-rose-500"
      >
        El nombre de usuario es obligatorio.
      </small>
    </label>

    <label class="flex flex-col gap-1 font-semibold text-slate-800">
      <span class="text-sm">Contraseña</span>
      <input
        type="password"
        formControlName="contrasena"
        [placeholder]="editing ? 'Mantener la contraseña actual' : 'Defina una contraseña temporal'"
        class="rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-medium text-slate-900 shadow-sm transition focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-200"
        [ngClass]="{
          'border-rose-400 focus:border-rose-500 focus:ring-rose-200':
            form.controls['contrasena'].invalid && form.controls['contrasena'].touched
        }"
      />
      <small
        *ngIf="form.controls['contrasena'].hasError('required') && form.controls['contrasena'].touched"
        class="text-sm font-medium text-rose-500"
      >
        La contraseña es obligatoria.
      </small>
      <small
        *ngIf="form.controls['contrasena'].hasError('minlength') && form.controls['contrasena'].touched"
        class="text-sm font-medium text-rose-500"
      >
        Debe contener al menos 6 caracteres.
      </small>
    </label>
  </div>

  <footer class="flex flex-wrap items-center gap-3">
    <button
      type="submit"
      [disabled]="form.invalid || saving"
      class="inline-flex items-center justify-center rounded-full bg-gradient-to-r from-indigo-500 to-violet-500 px-6 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/30 transition hover:-translate-y-0.5 hover:shadow-indigo-500/40 disabled:cursor-not-allowed disabled:opacity-70"
    >
      {{ saving ? 'Guardando…' : (editing ? 'Actualizar usuario' : 'Registrar usuario') }}
    </button>
    <button
      type="button"
      *ngIf="editing"
      (click)="onCancel()"
      [disabled]="saving"
      class="inline-flex items-center justify-center rounded-full bg-slate-200 px-6 py-2.5 text-sm font-semibold text-slate-700 shadow-sm transition hover:-translate-y-0.5 hover:bg-slate-300 disabled:cursor-not-allowed disabled:opacity-70"
    >
      Cancelar
    </button>
  </footer>
</form>
