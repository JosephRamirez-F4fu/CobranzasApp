<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  class="workspace-form-card"
>
  <header class="workspace-form-header">
    <h2 class="workspace-form-title">
      {{ editing ? 'Actualizar usuario administrador' : 'Registrar nuevo usuario administrador' }}
    </h2>
    <p class="workspace-form-subtitle">
      Los accesos se gestionan con el correo electronico del usuario. Los perfiles creados aqui siempre tendran el rol <strong>
        ADMIN
      </strong>
      dentro de la institucion.
    </p>
  </header>

  <div class="workspace-fieldset">
    <label class="workspace-field">
      <span class="workspace-label">Nombre completo</span>
      <input
        type="text"
        formControlName="nombreCompleto"
        placeholder="Ej. Ana Torres"
        class="workspace-input"
        [ngClass]="{
          'workspace-input-error': form.controls['nombreCompleto'].invalid && form.controls['nombreCompleto'].touched
        }"
      />
      <small
        *ngIf="form.controls['nombreCompleto'].invalid && form.controls['nombreCompleto'].touched"
        class="workspace-error"
      >
        El nombre es obligatorio.
      </small>
    </label>

    <label class="workspace-field">
      <span class="workspace-label">Correo electronico</span>
      <input
        type="email"
        formControlName="correo"
        placeholder="usuario@institucion.com"
        class="workspace-input"
        [ngClass]="{ 'workspace-input-error': form.controls['correo'].invalid && form.controls['correo'].touched }"
      />
      <small *ngIf="form.controls['correo'].invalid && form.controls['correo'].touched" class="workspace-error">
        Ingrese un correo valido.
      </small>
    </label>

    <ng-container *ngIf="!editing; else passwordInfo">
      <label class="workspace-field sm:col-span-2">
        <span class="workspace-label">Contrasena</span>
        <input
          type="password"
          formControlName="contrasena"
          placeholder="Defina una contrasena temporal"
          class="workspace-input"
          [ngClass]="{ 'workspace-input-error': form.controls['contrasena'].invalid && form.controls['contrasena'].touched }"
        />
        <small
          *ngIf="form.controls['contrasena'].hasError('required') && form.controls['contrasena'].touched"
          class="workspace-error"
        >
          La contrasena es obligatoria.
        </small>
        <small
          *ngIf="form.controls['contrasena'].hasError('minlength') && form.controls['contrasena'].touched"
          class="workspace-error"
        >
          Debe contener al menos 6 caracteres.
        </small>
      </label>
    </ng-container>
    <ng-template #passwordInfo>
      <div class="workspace-info-box sm:col-span-2">
        La contrasena actual se mantiene sin cambios por motivos de seguridad.
      </div>
    </ng-template>
  </div>

  <footer class="flex flex-wrap items-center gap-3">
    <button type="submit" [disabled]="form.invalid || saving" class="workspace-primary-btn">
      {{ saving ? 'Guardando.' : (editing ? 'Actualizar usuario' : 'Registrar usuario') }}
    </button>
    <button
      type="button"
      *ngIf="editing"
      (click)="onCancel()"
      [disabled]="saving"
      class="workspace-danger-btn"
    >
      Cancelar
    </button>
    <button
      type="button"
      *ngIf="!editing"
      (click)="onClear()"
      [disabled]="saving"
      class="workspace-secondary-btn"
    >
      Limpiar
    </button>
  </footer>
</form>
