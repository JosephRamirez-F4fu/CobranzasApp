<div class="max-w-md mx-auto py-12 px-4">
  <div class="bg-white/80 backdrop-blur-sm rounded-xl shadow-sm p-8 space-y-6">
    <div class="space-y-2 text-center">
      <h1 class="text-2xl font-semibold text-slate-900">Verifica tu identidad</h1>
      <p class="text-slate-600">
        Ingresa el código de verificación enviado a tu medio registrado para continuar.
      </p>
      <p
        *ngIf="pageService.challenge()?.expiresInSeconds"
        class="text-sm text-slate-500"
      >
        El código expira en {{ pageService.challenge()?.expiresInSeconds }} segundos.
      </p>
    </div>

    <form
      class="space-y-4"
      [formGroup]="pageService.otpForm"
      (ngSubmit)="onSubmit()"
      autocomplete="one-time-code"
    >
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-2" for="otp">
          Código OTP
        </label>
        <input
          id="otp"
          type="text"
          formControlName="otp"
          inputmode="numeric"
          autocomplete="one-time-code"
          maxlength="8"
          class="w-full rounded-lg border border-slate-200 px-4 py-3 text-center text-lg tracking-widest focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:bg-slate-100 disabled:text-slate-400"
          [class.border-red-500]="otpControl.invalid && otpControl.touched"
          placeholder="000000"
        />
        <p
          *ngIf="otpControl.invalid && otpControl.touched"
          class="mt-2 text-sm text-red-600"
        >
          Ingresa un código válido de 4 a 8 dígitos.
        </p>
      </div>

      <div
        *ngIf="pageService.errorMessage()"
        class="rounded-lg bg-red-50 px-4 py-3 text-sm text-red-600"
      >
        {{ pageService.errorMessage() }}
      </div>

      <button
        type="submit"
        class="w-full rounded-lg bg-blue-600 px-4 py-3 text-white font-semibold shadow-sm transition hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed"
        [disabled]="pageService.verifying()"
      >
        {{ pageService.verifying() ? 'Verificando…' : 'Verificar código' }}
      </button>

      <button
        type="button"
        class="w-full rounded-lg border border-slate-300 px-4 py-3 text-slate-600 font-medium transition hover:bg-slate-50 disabled:text-slate-400 disabled:border-slate-200"
        (click)="onCancel()"
        [disabled]="pageService.verifying()"
      >
        Cancelar
      </button>
    </form>
  </div>
</div>
